#!/usr/bin/env node
import{Command as he}from"commander";import{Command as ie}from"commander";import B from"postgres";var V="postgresql://postgres.hfqdczzvrdveswguefmt:p2GxEEoNJY5hlyre@aws-0-ap-southeast-1.pooler.supabase.com:6543/postgres",j=B(V);import g from"chalk";var m={error(...e){console.log(g.red(...e))},warn(...e){console.log(g.yellow(...e))},info(...e){console.log(g.cyan(...e))},success(...e){console.log(g.green(...e))},break(){console.log("")}};import{z as k}from"zod";import{z as p}from"zod";import G from"fs/promises";var H=p.object({path:p.object({utils:p.string({message:"utils path is missing"}),components:p.string({message:"components path is missing"})},{message:"`path` config is missing "}),using:p.enum(["vite","cra","next"])});async function d(){let e=process.cwd(),t=await G.readFile(`${e}/components.json`,"utf-8"),o=JSON.parse(t),n=H.safeParse(o);if(!n.success)throw new Error("Invalid configuration file");return n.data}import re from"prompts";function C(e,t,o){return e.split(t).map(s=>`${s.split("")[0].toUpperCase()}${s.slice(1)}`).join(o||"")}import K from"ora";import Q from"path";import E from"fs/promises";async function v(e){try{return await E.stat(e),!0}catch{return!1}}async function I({path:e,file:t,name:o,replace:n}){let s=`${e}/${o}`;return await v(s)&&!n?!1:(await E.writeFile(s,t),!0)}function T(e,t){return e.replace("@/components/ui",`${t.components.replace("/src","@")}`).replace("@/utils/lib",`${t.utils.replace("/src","@")}`)}async function $(e,t,o){let n=K(`Writing ${e.name}...`).start(),s=C(e.name,"-")+".tsx";await I({path:Q.resolve(process.cwd(),"."+t.path.components),name:s,file:T(e.content,t.path),replace:o?.replace})?n.succeed(`Successfuly inserted ${C(e.name,"-"," ")}.`):n.stop()}import ae from"chalk";import L from"ora";import{execa as O}from"execa";import X from"path";import A from"fs/promises";var Y="import 'react-loading-skeleton/dist/skeleton.css'",_={"react-loading-skeleton":async e=>{if(e.using==="vite"){let t=X.resolve(process.cwd(),"./src/main.tsx"),o=await A.readFile(t,"utf-8");await A.writeFile(t,`${Y}
${o}`)}}};async function x(e,t){if(e in _){let o=_[e];await o(t)}}import Z from"fs/promises";import ee from"path";async function D(){let e=ee.resolve(process.cwd(),"package.json"),t=JSON.parse(await Z.readFile(e,"utf-8"));return[...Object.keys(t.dependencies||{}),...Object.keys(t.devDependencies||{})]}async function R({dependencies:e,devDependencies:t}){let o=await D(),n=e.filter(i=>!o.includes(i)),s=t.filter(i=>!o.includes(i)),r=await d();n.forEach(i=>x(i,r)),s.forEach(i=>x(i,r)),s.length>0&&await O("npm",["install","-D",...s],{cwd:process.cwd()}),n.length>0&&await O("npm",["install",...n],{cwd:process.cwd()})}import{z as P}from"zod";import te from"axios";var oe="http://localhost:8000",u=te.create({baseURL:oe});var ne=P.object({data:P.array(P.string())});async function U(){let e=await u.get("/names");return ne.parse(e?.data).data}import{z as c}from"zod";var se=c.object({components:c.array(c.object({name:c.string(),content:c.string()})),dependencies:c.array(c.string()),devDependencies:c.array(c.string())});async function z(e){let t=await u.get(`?components=${e.join(",")}`);return se.parse(t?.data)}var ce=k.object({components:k.array(k.string())}),W=new ie().name("add").description("adds component to your project").argument("[inputComponents...]","components to add").action(me);async function me(e){try{let t=await d(),o=ce.parse({components:e}),n=await U(),s=[],r=[];o.components.forEach(a=>{n.includes(a)?s.push(a):r.push(a)}),r.length>0&&console.log(ae.yellow("Ignoring Invalid Component Names:"),r.join(", "));let i=s;if(o.components.length<=0){let{components:a}=await re({instructions:!1,type:"multiselect",hint:"Press [space] to select, [a] to select all, [enter] to submit",name:"components",message:"Select components",choices:n.map(F=>({title:F,value:F}))});i=a}if(i.length<=0){m.info("No valid components selected, exiting.");return}let w=L("Retrieving components from registry... "),{components:y,dependencies:N,devDependencies:b}=await z(i);if(w.stop(),await Promise.all(y.map(a=>$(a,t,{replace:!0}))),N.length>0||b.length>0){let a=L("Installing dependencies...").start();await R({dependencies:N,devDependencies:b}),a.succeed("Completed dependency installation")}}catch(t){m.error(t.message)}finally{await j.end()}}import{Command as le}from"commander";import J from"prompts";import{z as f}from"zod";import l from"fs/promises";import h from"path";import M from"chalk";var S=`import clsx, { ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...classNames: ClassValue[]) {
  return twMerge(clsx(classNames));
}
`;var pe="/src/components/ui",fe="/src/utils",ge="lib",q=new le().name("init").description("intialize your project to accept layer components").action(ue),de=f.object({componentPath:f.string(),utilsPath:f.string(),utilsName:f.string(),buildTool:f.enum(["vite","cra","next"])});async function ue(){try{let e=await J([{type:"text",name:"componentPath",message:"Component install path?",initial:pe},{type:"text",message:"Utils file install path?",name:"utilsPath",initial:fe},{type:"text",message:"Utils file name?",name:"utilsName",initial:ge},{type:"select",message:"Which build tool are you using?",name:"buildTool",initial:0,choices:[{title:"Vite",value:"vite"}]}]),t=de.parse(e),o=process.cwd(),n={path:{components:t.componentPath,utils:`${t.utilsPath}/${t.utilsName}`},using:t.buildTool},s=JSON.stringify(n,null,"	");await l.writeFile(h.resolve(o,"./components.json"),s);let r=h.resolve(o,`.${n.path.components}`);l.stat(r)||l.mkdir(r);let i=h.resolve(o,`.${n.path.utils}.ts`),w=h.resolve(o,`.${t.utilsPath}`);if(await v(i)){let{proceed:y}=await J({name:"proceed",type:"toggle",message:`The file named ${M.yellow(t.utilsName+".tsx")} at ${M.yellow(t.utilsPath)} already exists, would like to replace it?`,initial:!0,active:"yes",inactive:"no"});y&&await l.writeFile(i,S)}else l.mkdir(w,{recursive:!0}),await l.writeFile(i,S);m.success("Successfuly initialized project.")}catch(e){m.error(e.message)}}import{config as we}from"dotenv";we({path:"./.env"});async function ye(){try{let e=new he().name("layers-ui").description("Adds pre-made components to projects").version("1.0.0");e.addCommand(W).addCommand(q),e.parse(process.argv)}catch(e){console.log(e.message)}}async function Ce(){}process.argv[2]==="test"?Ce():ye();
//# sourceMappingURL=index.js.map